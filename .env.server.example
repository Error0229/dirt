# Server-side configuration (dirt-api only)
# These secrets must NEVER reach client binaries.
#
# Copy to .env.server and fill in your values:
#   cp .env.server.example .env.server
#
# In production, use platform-native env injection instead:
#   fly secrets set TURSO_PLATFORM_API_TOKEN=...
#   docker run -e TURSO_PLATFORM_API_TOKEN=...

# --- Server binding ---
DIRT_API_BIND_ADDR=127.0.0.1:8080

# --- Bootstrap manifest ---
BOOTSTRAP_PUBLIC_API_BASE_URL=
BOOTSTRAP_MANIFEST_VERSION=1
BOOTSTRAP_CACHE_MAX_AGE_SECS=300

# --- Supabase JWT verification ---
SUPABASE_URL=https://your-project-ref.supabase.co
SUPABASE_ANON_KEY=
SUPABASE_JWKS_URL=
SUPABASE_JWT_ISSUER=
SUPABASE_JWT_AUDIENCE=authenticated
SUPABASE_JWKS_CACHE_TTL_SECS=300

# --- Turso (database provisioning + sync tokens) ---
TURSO_API_URL=https://api.turso.tech
TURSO_ORGANIZATION_SLUG=
TURSO_DATABASE_NAME=
TURSO_PLATFORM_API_TOKEN=
TURSO_SYNC_TOKEN_TTL_SECS=900

# --- Media / R2 storage ---
MEDIA_SIGNED_URL_TTL_SECS=600

# --- Auth tuning ---
AUTH_CLOCK_SKEW_SECS=60

# --- Rate limiting ---
RATE_LIMIT_WINDOW_SECS=60
SYNC_TOKEN_RATE_LIMIT_PER_WINDOW=20
MEDIA_PRESIGN_RATE_LIMIT_PER_WINDOW=120

# --- Dev-only fallbacks (do NOT use in production) ---
# TURSO_DATABASE_URL=libsql://your-db-name.turso.io
# TURSO_AUTH_TOKEN=your-database-auth-token
